<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prevenci√≥n de Desastres en Tabasco</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background: #f1f6fa; margin: 0; padding: 0; }
    header { background: #1167b1; color: #fff; padding: 20px 0; text-align: center; }
    main { max-width: 800px; margin: 30px auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 8px #cfd8dc; padding: 30px; }
    h2 { color: #1167b1; margin-top: 30px; }
    ul, ol { margin-left: 25px; }
    a { color: #0077b6; }
    .clima-mapa { margin: 20px 0; text-align: center; }
    .boton-clima {
      display: inline-block;
      padding: 12px 20px;
      background: #1167b1;
      color: #fff;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      margin-top: 10px;
      transition: background 0.2s;
    }
    .boton-clima:hover { background: #0b4f7c; }
    .alerta { background: #ffe082; border-left: 6px solid #ffb300; padding: 12px; border-radius: 5px; margin: 15px 0; }
    @media (max-width: 600px) {
      main { padding: 12px; }
    }
    /* Chat styles */
    #chatbot-section {
      margin-top: 40px;
      border-top: 1px solid #e0e0e0;
      padding-top: 30px;
    }
    #chat-container {
      background: #f7fafc;
      border-radius: 10px;
      box-shadow: 0 2px 6px #e0e0e0;
      max-width: 100%;
      padding: 20px;
      margin: 0 auto 20px auto;
      min-height: 200px;
      max-height: 320px;
      overflow-y: auto;
      font-size: 15px;
    }
    .chat-bubble {
      margin: 10px 0;
      padding: 10px 15px;
      border-radius: 18px;
      display: inline-block;
      max-width: 80%;
      line-height: 1.4;
    }
    .user { background: #1167b1; color: #fff; align-self: flex-end; float: right; clear: both;}
    .bot { background: #e0f1fc; color: #222; align-self: flex-start; float: left; clear: both;}
    #chat-form {
      display: flex;
      margin-top: 10px;
      gap: 8px;
    }
    #user-input {
      flex: 1;
      padding: 10px;
      border: 1px solid #b0bec5;
      border-radius: 6px;
      font-size: 15px;
    }
    #send-btn {
      background: #1167b1;
      color: #fff;
      border: none;
      padding: 10px 18px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
    }
    #send-btn:hover { background: #0b4f7c; }
    @media (max-width: 600px) {
      #chat-container { font-size: 14px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Prevenci√≥n de Desastres Naturales en Tabasco</h1>
    <p>Informaci√≥n clave para protegerte a ti y a tu familia</p>
  </header>
  <main>
    <section>
      <h2>¬øA qu√© riesgos est√° expuesto Tabasco?</h2>
      <ul>
        <li><strong>Inundaciones:</strong> Por lluvias intensas y desbordamiento de los r√≠os Grijalva, Usumacinta, Carrizal, entre otros.</li>
        <li><strong>Huracanes y tormentas tropicales:</strong> Especialmente de junio a noviembre.</li>
        <li><strong>Deslaves:</strong> En zonas cercanas a cerros o laderas.</li>
        <li><strong>Altas temperaturas:</strong> Olas de calor que pueden afectar la salud.</li>
        <li><strong>Contingencias qu√≠micas:</strong> Por accidentes industriales o transporte de hidrocarburos.</li>
      </ul>
    </section>

    <section>
      <h2>¬øC√≥mo preparar suministros para prevenirnos?</h2>
      <ol>
        <li><strong>Agua potable:</strong> Almacena al menos 4 litros por persona por d√≠a, para al menos 3 d√≠as.</li>
        <li><strong>Alimentos no perecederos:</strong> Latas, barras energ√©ticas, galletas, leche en polvo, etc.</li>
        <li><strong>Botiqu√≠n de primeros auxilios:</strong> Medicamentos b√°sicos, vendas, alcohol, medicamentos personales.</li>
        <li><strong>Linternas y bater√≠as extra:</strong> Tambi√©n velas y cerillos en envase herm√©tico.</li>
        <li><strong>Radio port√°til:</strong> Preferiblemente con bater√≠as o carga manual para recibir alertas.</li>
        <li><strong>Ropa impermeable y cobijas.</strong></li>
        <li><strong>Documentos importantes:</strong> Gu√°rdalos en bolsa herm√©tica (identificaciones, actas, p√≥lizas, etc.).</li>
        <li><strong>Art√≠culos de higiene:</strong> Jab√≥n, gel antibacterial, papel higi√©nico, toallas sanitarias, cubrebocas, etc.</li>
        <li><strong>Cargadores y bater√≠as port√°tiles para celulares.</strong></li>
        <li><strong>Silbato o alarma:</strong> Para pedir ayuda en caso necesario.</li>
      </ol>
    </section>

    <section>
      <h2>Refugios temporales en Tabasco</h2>
      <p>
        El estado cuenta con refugios habilitados por Protecci√≥n Civil y las autoridades municipales.<br>
        <strong>Para ubicar el refugio m√°s cercano:</strong>
      </p>
      <ul>
        <li>
          Consulta el listado actualizado en:
          <a href="https://tabasco.gob.mx/prevencion-y-atencion-de-desastres" target="_blank">Gobierno de Tabasco</a> y
          <a href="https://proteccioncivil.tabasco.gob.mx/" target="_blank">Protecci√≥n Civil Tabasco</a>
        </li>
        <li>Llama al <strong>911</strong> o a los n√∫meros de emergencia locales.</li>
        <li>Identifica previamente el refugio m√°s cercano y elabora un plan familiar para evacuar r√°pidamente si es necesario.</li>
      </ul>
      <div class="alerta">
        <strong>Importante:</strong> Sigue siempre las indicaciones oficiales y evacua de inmediato si las autoridades lo indican.
      </div>
    </section>

    <section>
      <h2>Consulta el clima y condiciones en tiempo real</h2>
      <div class="clima-mapa">
        <a class="boton-clima" href="https://www.google.com/maps/@17.9895,-92.9475,10z/data=!5m1!1e1" target="_blank">
          Ver clima y condiciones en Google Maps
        </a>
        <br>
        <a class="boton-clima" href="https://www.google.com/search?q=clima+tabasco" target="_blank">
          Pron√≥stico del clima para Tabasco
        </a>
        <br>
        <a class="boton-clima" href="https://smn.conagua.gob.mx/" target="_blank">
          Alertas y pron√≥stico oficial (CONAGUA)
        </a>
      </div>
      <p>Puedes visualizar precipitaciones, vientos y temperatura en tiempo real usando Google Maps o consultar fuentes oficiales.</p>
    </section>

    <section>
      <h2>Recomendaciones adicionales</h2>
      <ul>
        <li>Mantente informado a trav√©s de fuentes oficiales. <strong>No difundas rumores.</strong></li>
        <li>Ten a la mano los n√∫meros de emergencia y un plan de comunicaci√≥n familiar.</li>
        <li>Prepara una mochila de emergencia para cada integrante de la familia.</li>
        <li>Revisa peri√≥dicamente tus suministros y documentos.</li>
      </ul>
    </section>

    <section id="chatbot-section">
      <h2>¬øTienes preguntas? Pregunta al ChatBot</h2>
      <div id="chat-container"></div>
      <form id="chat-form" autocomplete="off">
        <input type="text" id="user-input" placeholder="Escribe tu pregunta aqu√≠..." required />
        <button type="submit" id="send-btn">Enviar</button>
      </form>
      <p style="font-size:13px; color:#888; margin:10px 0 0 0;">* El ChatBot responde dudas frecuentes sobre prevenci√≥n y desastres en Tabasco.</p>
    </section>
  </main>
  <footer style="text-align: center; color: #888; font-size: 13px; padding: 16px 0;">
    &copy; 2025 Prevenci√≥n Tabasco. Informaci√≥n p√∫blica y de Protecci√≥n Civil.
  </footer>
  <script>
    // Chatbot IA usando API gratuita alternativa (gpt4free.deno.dev)
    const chatContainer = document.getElementById('chat-container');
    const chatForm = document.getElementById('chat-form');
    const userInput = document.getElementById('user-input');

    function agregarMensaje(texto, tipo) {
      const burbuja = document.createElement('div');
      burbuja.className = 'chat-bubble ' + tipo;
      burbuja.innerHTML = texto;
      chatContainer.appendChild(burbuja);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    async function obtenerRespuestaIA(preguntaUsuario) {
      try {
        const response = await fetch('https://gpt4free.deno.dev/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt: preguntaUsuario })
        });
        const data = await response.json();
        if (data && data.choices && data.choices[0] && data.choices[0].text) {
          return data.choices[0].text.replace(/\n/g, "<br>");
        } else {
          return "Lo siento, no pude obtener una respuesta en este momento.";
        }
      } catch (e) {
        return "Ocurri√≥ un error al conectar con el servicio de IA. Intenta de nuevo m√°s tarde.";
      }
    }

    chatForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      const pregunta = userInput.value.trim();
      if (pregunta === '') return;
      agregarMensaje(pregunta, 'user');
      agregarMensaje("Pensando... ‚è≥", 'bot');
      userInput.value = '';
      userInput.disabled = true;
      document.getElementById('send-btn').disabled = true;

      const respuesta = await obtenerRespuestaIA(pregunta);

      // Elimina el mensaje "Pensando..."
      const burbujasBot = chatContainer.querySelectorAll('.chat-bubble.bot');
      if (burbujasBot.length > 0) {
        burbujasBot[burbujasBot.length - 1].remove();
      }
      agregarMensaje(respuesta, 'bot');
      userInput.disabled = false;
      document.getElementById('send-btn').disabled = false;
      userInput.focus();
    });

    window.onload = function() {
      agregarMensaje("¬°Hola! üëã ¬øTienes dudas sobre prevenci√≥n de desastres en Tabasco? Pregunta lo que necesites.", 'bot');
    };
  </script>
</body>
</html>